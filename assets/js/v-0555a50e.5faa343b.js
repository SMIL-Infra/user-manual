"use strict";(self.webpackChunksmil_infra_user_manual=self.webpackChunksmil_infra_user_manual||[]).push([[800],{6193:(e,l,a)=>{a.r(l),a.d(l,{default:()=>k});var i=a(6252);const r=(0,i._)("h1",{id:"freeipa账号迁移",tabindex:"-1"},[(0,i._)("a",{class:"header-anchor",href:"#freeipa账号迁移","aria-hidden":"true"},"#"),(0,i.Uk)(" FreeIPA账号迁移")],-1),n=(0,i._)("p",null,"实验室手动给同学们分配账号由来已久，各台服务器上都有大量的本地账号存在。",-1),t=(0,i._)("p",null,"本文档意图指导大家在尽量不影响实验的情况下，将账号迁移至FreeIPA中。",-1),u=(0,i.Uk)("迁移完成后将可以使用"),s=(0,i.Uk)("分布式存储"),d=(0,i.uE)('<h2 id="计划" tabindex="-1"><a class="header-anchor" href="#计划" aria-hidden="true">#</a> 计划</h2><p>迁移将以灰度方式逐渐完成。在迁移过程中，将一部分服务器接入FreeIPA，未接入的服务器则按原有方式登录。根据操作的进度和大家的反馈，逐步增加接入服务器的数量。</p><p>对之前在已接入的服务器中的任意一台上拥有账号的同学，Infra团队会为你分配FreeIPA账号，并主动联系你告知初始密码。若你认为你应该收到却未收到初始密码，请联系Infra团队。</p><h2 id="需要的操作" tabindex="-1"><a class="header-anchor" href="#需要的操作" aria-hidden="true">#</a> 需要的操作</h2><p>收到密码的同学可使用FreeIPA账号登录任何已接入的服务器，也可以使用你原有的登录方式登录原来有账号的服务器。请在合适的时候，使用迁移脚本清除本地账号，完全接入FreeIPA：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> ipa-migrate\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>此过程根据你home目录中文件数量，可能需要几秒到几十分钟的时间（chown所需时间）。</p><p>迁移后：</p>',8),h=(0,i._)("li",null,"你的所有文件将会保留。",-1),p=(0,i._)("li",null,"你将不能使用原有密码登录，必需使用FreeIPA的密码。",-1),c=(0,i.Uk)("你依然可以使用原来的公钥登录，同时你也可以使用FreeIPA中"),o=(0,i.Uk)("录入"),m=(0,i.Uk)("的公钥。"),f=(0,i._)("li",null,"你的uid、gid将更新。",-1),_=(0,i._)("li",null,"你的home目录的权限将自动更新。若在home目录外还有你所有的文件，请联系管理员更新权限。",-1),g=(0,i.uE)('<p>需要注意：</p><ul><li>每台服务器均可独立迁移，你可根据自己的实际情况控制迁移进度。若暂不进行迁移应该不会影响正常操作。</li><li>在运行迁移脚本前，请结束在该主机上，除正在操作的shell外的所有进程。</li></ul><p>再次登录后，运行<code>id</code>命令确认是否迁移成功。若显示uid为8596XXXXX则表示已经迁移成功，否则请联系Infra团队。</p><h2 id="faq" tabindex="-1"><a class="header-anchor" href="#faq" aria-hidden="true">#</a> FAQ</h2><ul><li><p>账户迁移和分布式存储有什么关系？</p><p>迁移后才有权限在分布式存储中创建文件。但你的文件依然会保留在原来的位置，并不会自动迁移到分布式存储上。如有需要，可以自行将数据复制到<code>/mnt/cephfs</code>中</p></li><li><p>迁移是否有期限？不迁移是否有不良后果？</p><p>目前暂时没有期限，若不迁移应该不会影响任何正常服务器的使用，但你将没有权限使用分布式存储。</p></li></ul>',5),A={},k=(0,a(3744).Z)(A,[["render",function(e,l){const a=(0,i.up)("RouterLink");return(0,i.wg)(),(0,i.iD)(i.HY,null,[r,n,t,(0,i._)("p",null,[u,(0,i.Wm)(a,{to:"/storage/"},{default:(0,i.w5)((()=>[s])),_:1})]),d,(0,i._)("ul",null,[h,p,(0,i._)("li",null,[c,(0,i.Wm)(a,{to:"/auth/self-service.html#%E6%B7%BB%E5%8A%A0ssh%E5%85%AC%E9%92%A5"},{default:(0,i.w5)((()=>[o])),_:1}),m]),f,_]),g],64)}]])},2089:(e,l,a)=>{a.r(l),a.d(l,{data:()=>i});const i={key:"v-0555a50e",path:"/auth/migration.html",title:"FreeIPA账号迁移",lang:"zh-CN",frontmatter:{},excerpt:"",headers:[{level:2,title:"计划",slug:"计划",children:[]},{level:2,title:"需要的操作",slug:"需要的操作",children:[]},{level:2,title:"FAQ",slug:"faq",children:[]}],filePathRelative:"auth/migration.md",git:{updatedTime:1607927961e3,contributors:[{name:"胡玮文",email:"huww98@outlook.com",commits:6}]}}}}]);